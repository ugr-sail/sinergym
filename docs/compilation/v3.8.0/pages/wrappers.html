<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wrappers &mdash; Sinergym  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/doc_theme.css?v=642ef2a8" />

  
    <link rel="shortcut icon" href="../_static/logo-sidebar.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Extra configuration in Sinergym simulations" href="extra-configuration.html" />
    <link rel="prev" title="Controllers" href="controllers.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #a5beba" >

          
          
          <a href="../index.html" class="icon icon-home">
            Sinergym
              <img src="../_static/logo-sidebar.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage-example.html">Usage example</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sinergym</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="buildings.html">Buildings</a></li>
<li class="toctree-l1"><a class="reference internal" href="weathers.html">Weathers</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="environments.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="environments_registration.html">Environments configuration and registration</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging system overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="output.html">Sinergym output</a></li>
<li class="toctree-l1"><a class="reference internal" href="rewards.html">Rewards</a></li>
<li class="toctree-l1"><a class="reference internal" href="controllers.html">Controllers</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Wrappers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#multiobjectivereward">MultiObjectiveReward</a></li>
<li class="toctree-l2"><a class="reference internal" href="#previousobservationwrapper">PreviousObservationWrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="#datetimewrapper">DatetimeWrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="#normalizeaction">NormalizeAction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#discretizeenv">DiscretizeEnv</a></li>
<li class="toctree-l2"><a class="reference internal" href="#incrementalwrapper">IncrementalWrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="#discreteincrementalwrapper">DiscreteIncrementalWrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="#normalizeobservation">NormalizeObservation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#logger-wrappers">Logger Wrappers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#loggerwrapper">LoggerWrapper</a></li>
<li class="toctree-l3"><a class="reference internal" href="#csvlogger">CSVLogger</a></li>
<li class="toctree-l3"><a class="reference internal" href="#wandblogger">WandBLogger</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#reduceobservationwrapper">ReduceObservationWrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="#multiobswrapper">MultiObsWrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="#weatherforecastingwrapper">WeatherForecastingWrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="#energycostwrapper">EnergyCostWrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deltatempwrapper">DeltaTempWrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="#variabilitycontextwrapper">VariabilityContextWrapper</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extra-configuration.html">Extra configuration in Sinergym simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="deep-reinforcement-learning.html">Deep Reinforcement Learning integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="gcloudAPI.html">Google Cloud integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="github-actions.html">Github actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">Tests</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="notebooks/basic_example.html">Basic example</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/getting_env_information.html">Getting information about Sinergym environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/sinergym_package.html">Sinergym package information</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/change_environment.html">Changing an environment registered in Sinergym</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/default_building_control.html">Default building control using an empty action space</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/wrappers_examples.html">Wrappers example</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/personalize_loggerwrapper.html">LoggerWrapper customization</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/logging_unused_variables.html">Logging unused variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/rule_controller_example.html">Rule-based controller example</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks/drl.html">DRL usage example</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="API-reference.html">API reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #a5beba" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Sinergym</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Wrappers</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/pages/wrappers.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="wrappers">
<h1>Wrappers<a class="headerlink" href="#wrappers" title="Link to this heading"></a></h1>
<p><em>Sinergym</em> provides several <strong>wrappers</strong> to add functionalities to the environments that are not included by default.</p>
<p>The implementations of these wrappers are available in <a class="reference external" href="https://github.com/ugr-sail/sinergym/blob/main/sinergym/utils/wrappers.py">sinergym/sinergym/utils/wrappers.py</a>.</p>
<p>Custom wrappers can be created by inheriting from <code class="docutils literal notranslate"><span class="pre">gym.Wrapper</span></code> or one of its variants, as seen in the
<a class="reference external" href="https://gymnasium.farama.org/tutorials/gymnasium_basics/implementing_custom_wrappers/">Gymnasium documentation</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For examples on how to use these wrappers, refer to <a class="reference internal" href="notebooks/wrappers_examples.html#Wrappers-example"><span class="std std-ref">Wrappers example</span></a>.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Take care of the wrapping order when using multiple nested wrappers, as their inputs and outputs may be altered.</p>
</div>
<p>Below are the wrappers that are pre-implemented in <em>Sinergym</em>.</p>
<section id="multiobjectivereward">
<h2>MultiObjectiveReward<a class="headerlink" href="#multiobjectivereward" title="Link to this heading"></a></h2>
<p>When using it, every environment step will return a reward vector (one scalar per reward term) instead of a single scalar value. Refer to <a class="reference external" href="https://github.com/ugr-sail/sinergym/issues/301">#301</a> for additional information.</p>
</section>
<section id="previousobservationwrapper">
<h2>PreviousObservationWrapper<a class="headerlink" href="#previousobservationwrapper" title="Link to this heading"></a></h2>
<p>This wrapper adds observations from the previous timestep to the current environment observation. You can select the variables you want to track for their previous observation values.</p>
</section>
<section id="datetimewrapper">
<h2>DatetimeWrapper<a class="headerlink" href="#datetimewrapper" title="Link to this heading"></a></h2>
<p>This wrapper replaces the <code class="docutils literal notranslate"><span class="pre">day_of_month</span></code> value with the <code class="docutils literal notranslate"><span class="pre">is_weekend</span></code> flag, and the <code class="docutils literal notranslate"><span class="pre">hour</span></code> and <code class="docutils literal notranslate"><span class="pre">month</span></code> values with <em>sin</em> and <em>cos</em> values. The observation space is automatically updated.</p>
</section>
<section id="normalizeaction">
<h2>NormalizeAction<a class="headerlink" href="#normalizeaction" title="Link to this heading"></a></h2>
<p>This wrapper normalizes the action space. It is particularly useful for DRL algorithms, as normalized action values are generally recommended.</p>
<p>By default, normalization is applied in the range <code class="docutils literal notranslate"><span class="pre">[-1,1]</span></code>. However, a different <strong>range</strong> can be specified when the wrapper is instantiated.</p>
<p><em>Sinergym</em> parses these values to the real action space defined in the original environment internally before sending it to the <em>EnergyPlus</em> Simulator via the API middleware.</p>
<a class="reference internal image-reference" href="../_images/normalize_action_wrapper.png"><img alt="Normalize action wrapper graph." class="align-center" src="../_images/normalize_action_wrapper.png" style="width: 776.8000000000001px; height: 488.0px;" /></a>
</section>
<section id="discretizeenv">
<h2>DiscretizeEnv<a class="headerlink" href="#discretizeenv" title="Link to this heading"></a></h2>
<p>This wrapper discretizes the action space. The <strong>discrete space</strong> should be defined according to the Gymnasium standard. This space should be either <code class="docutils literal notranslate"><span class="pre">gym.spaces.Discrete</span></code>, <code class="docutils literal notranslate"><span class="pre">gym.spaces.MultiDiscrete</span></code>, or <code class="docutils literal notranslate"><span class="pre">gym.spaces.MultiBinary</span></code>.</p>
<p>An <strong>action mapping function</strong> is also provided to map these values into ones that are compatible with the underlying continuous environment, just before sending them to the simulator.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The discrete space <strong>must</strong> discretize the original continuous space. Hence,
the discrete space should only take values that are considered in the original
continuous action space.</p>
</div>
<p>Users can define this action mapping function to specify the transition from discrete to continuous values. If the output of the action mapping function does not align with the original environment action space, an error will be raised. Refer to <a class="reference internal" href="notebooks/wrappers_examples.html#Action-discretization-wrapper"><span class="std std-ref">Action discretization wrapper</span></a> for an usage example.</p>
<a class="reference internal image-reference" href="../_images/discretize_wrapper.png"><img alt="Discretize wrapper graph." class="align-center" src="../_images/discretize_wrapper.png" style="width: 856.8000000000001px; height: 480.0px;" /></a>
</section>
<section id="incrementalwrapper">
<h2>IncrementalWrapper<a class="headerlink" href="#incrementalwrapper" title="Link to this heading"></a></h2>
<p>This wrapper converts some continuous variables into actions that indicate an increment/decrement with respect to their current value, rather than directly setting a value.</p>
<p>A dictionary is given as an argument to calculate the possible increments/decrements for each variable. This dictionary uses the name of each variable to be transformed as the key, while the value is a tuple of values called <strong>delta</strong> and <strong>step</strong>, which creates a set of possible increments for each desired variable.</p>
<ul class="simple">
<li><p><strong>delta</strong>: the maximum range of increments and decrements.</p></li>
<li><p><strong>step</strong>: the interval of intermediate values within the ranges.</p></li>
</ul>
<p>The following figure illustrates its operation. Essentially, the values are rounded to the nearest increment value and added to the current real values of the simulation:</p>
<a class="reference internal image-reference" href="../_images/incremental_wrapper.png"><img alt="Incremental wrapper graph." class="align-center" src="../_images/incremental_wrapper.png" style="width: 924.8000000000001px; height: 967.2px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="discreteincrementalwrapper">
<h2>DiscreteIncrementalWrapper<a class="headerlink" href="#discreteincrementalwrapper" title="Link to this heading"></a></h2>
<p>This wrapper updates an environment, transforming it into a <em>discrete</em> environment with an action mapping function and action
based on the specified <strong>delta</strong> and <strong>step</strong>. The action is added to the <strong>current setpoint</strong> values rather than overwriting the last action. Therefore, the action is the current setpoint with the increment, rather than the discrete value action which is intended to define the increment/decrement itself.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This wrapper fully changes the action space from continuous to discrete, meaning that increments/decrements
apply to all variables. In essence, selecting variables individually as the <code class="docutils literal notranslate"><span class="pre">IncrementalWrapper</span></code> does is not possible.</p>
</div>
<a class="reference internal image-reference" href="../_images/discrete_incremental_wrapper.png"><img alt="Discrete incremental wrapper graph." class="align-center" src="../_images/discrete_incremental_wrapper.png" style="width: 856.8000000000001px; height: 553.6px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="normalizeobservation">
<h2>NormalizeObservation<a class="headerlink" href="#normalizeobservation" title="Link to this heading"></a></h2>
<p>This wrapper is used to transform observations received from the simulator into values in <code class="docutils literal notranslate"><span class="pre">[-1,1]</span></code>.
It is based on the <a class="reference external" href="https://gymnasium.farama.org/_modules/gymnasium/wrappers/normalize/#NormalizeObservation">dynamic normalization wrapper of Gymnasium</a>.</p>
<p>Initially, it may not be precise and the values may often be out of range, so use this wrapper with caution.</p>
<p>However, <em>Sinergym</em> extends its functionality with some additional features:</p>
<ul class="simple">
<li><p>It includes the last unnormalized observation as an environment attribute, which is useful for logging.</p></li>
<li><p>It provides access to the means and standard deviations used for normalization calibration, thus addressing the low-level
issues found in the original wrapper.</p></li>
<li><p>Similarly, these calibration values can be set via a method or within the wrapper constructor. These values can be specified either as a list or as <code class="docutils literal notranslate"><span class="pre">numpy</span></code> array, or simply writing the file path generated. See <a class="reference internal" href="API-reference.html#api-reference"><span class="std std-ref">API reference</span></a> for more information.</p></li>
<li><p>Automatic calibration can be enabled or disabled when interacting with the environment, allowing the calibration to remain static rather than adaptive. This is useful for model evaluation.</p></li>
</ul>
<p>In addition, this wrapper saves the <strong>mean and standard deviation</strong> values as part of the <em>Sinergym</em> output. These can be used when loading and a evaluating a trained model.</p>
<p>An example of its use can be found in <a class="reference internal" href="notebooks/drl.html#Loading-and-evaluating-a-trained-model"><span class="std std-ref">Loading and evaluating a trained model</span></a>. It is also important that normalization calibration update is disabled during evaluation.</p>
<p><em>Sinergym</em> will also save intermediate mean and standard deviation values in files within episode directories, as well as for the
best model obtained if <a class="reference internal" href="deep-reinforcement-learning.html#loggerevalcallback"><span class="std std-ref">LoggerEvalCallback</span></a> is active during training.</p>
<p>These features are crucial when evaluating models trained using this wrapper. For more details, see <a class="reference external" href="https://github.com/ugr-sail/sinergym/issues/407">#407</a>.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="logger-wrappers">
<h2>Logger Wrappers<a class="headerlink" href="#logger-wrappers" title="Link to this heading"></a></h2>
<p>These wrappers use the <em>Sinergym</em> <code class="docutils literal notranslate"><span class="pre">LoggerStorage</span></code> class functionalities to save information during environment interactions. For more details, see <a class="reference internal" href="logging.html#logging-system-overview"><span class="std std-ref">Logging system overview</span></a>.</p>
<p>The diagram below illustrates the relationship between the wrappers and the logger, with explanations
provided in the following subsections.</p>
<a class="reference internal image-reference" href="../_images/logger_structure.png"><img alt="Logger wrappers graph." class="align-center" src="../_images/logger_structure.png" style="width: 833.6px; height: 866.4000000000001px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="loggerwrapper">
<h3>LoggerWrapper<a class="headerlink" href="#loggerwrapper" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">BaseLoggerWrapper</span></code> is the abstract class for logger wrappers. It stores all the relevant information during environment interactions. A new attribute, <code class="docutils literal notranslate"><span class="pre">data_logger</span></code>, is included to the environment. This is an instance of <code class="docutils literal notranslate"><span class="pre">LoggerStorage</span></code> containing the interaction information. A custom <code class="docutils literal notranslate"><span class="pre">LoggerStorage</span></code> class can be used by passing it to the constructor to change the logging backend.</p>
<p>Inherit from this class to create a new logger wrapper and implement abstract methods to define custom and episode summary metrics from the available data.</p>
<p><em>Sinergym</em> uses this base class to implement the <code class="docutils literal notranslate"><span class="pre">LoggerWrapper</span></code>, the default logger, but custom loggers can be implemented easily from this abstract class (see <a class="reference internal" href="notebooks/personalize_loggerwrapper.html#LoggerWrapper-customization"><span class="std std-ref">LoggerWrapper customization</span></a>).</p>
<p>The current summary metrics for this default <em>Sinergym</em> wrapper are: <code class="docutils literal notranslate"><span class="pre">episode_num</span></code>, <code class="docutils literal notranslate"><span class="pre">mean_reward</span></code>, <code class="docutils literal notranslate"><span class="pre">std_reward</span></code>,
<code class="docutils literal notranslate"><span class="pre">mean_reward_comfort_term</span></code>, <code class="docutils literal notranslate"><span class="pre">std_reward_comfort_term</span></code>, <code class="docutils literal notranslate"><span class="pre">mean_reward_energy_term</span></code>, <code class="docutils literal notranslate"><span class="pre">std_reward_energy_term</span></code>,
<code class="docutils literal notranslate"><span class="pre">mean_abs_comfort_penalty</span></code>, <code class="docutils literal notranslate"><span class="pre">std_abs_comfort_penalty</span></code>, <code class="docutils literal notranslate"><span class="pre">mean_abs_energy_penalty</span></code>, <code class="docutils literal notranslate"><span class="pre">std_abs_energy_penalty</span></code>,
<code class="docutils literal notranslate"><span class="pre">mean_temperature_violation</span></code>, <code class="docutils literal notranslate"><span class="pre">std_temperature_violation</span></code>, <code class="docutils literal notranslate"><span class="pre">mean_power_demand</span></code>, <code class="docutils literal notranslate"><span class="pre">std_power_demand</span></code>, <code class="docutils literal notranslate"><span class="pre">cumulative_power_demand</span></code>, <code class="docutils literal notranslate"><span class="pre">comfort_violation_time(%)</span></code>, <code class="docutils literal notranslate"><span class="pre">length(timesteps)</span></code>, <code class="docutils literal notranslate"><span class="pre">time_elapsed(hours)</span></code>, <code class="docutils literal notranslate"><span class="pre">terminated</span></code>, <code class="docutils literal notranslate"><span class="pre">truncated</span></code></p>
<p>Note how <strong>data is refreshed with each new episode</strong>. However, this wrapper can be combined with others to store all data and summaries in different locations and formats. For this purpose, <em>Sinergym</em> implements <code class="docutils literal notranslate"><span class="pre">CSVLogger</span></code> and <code class="docutils literal notranslate"><span class="pre">WandBLogger</span></code>.</p>
</section>
<section id="csvlogger">
<h3>CSVLogger<a class="headerlink" href="#csvlogger" title="Link to this heading"></a></h3>
<p>This wrapper works with the <code class="docutils literal notranslate"><span class="pre">data_logger</span></code> instance of <code class="docutils literal notranslate"><span class="pre">LoggerWrapper</span></code>, enabling the parsing and saving of data in CSV files during simulations. A file named <code class="docutils literal notranslate"><span class="pre">progress.csv</span></code> is generated in the root of the output directory. This file contains general simulation results, updated per episode. The structure of this file is defined in the <code class="docutils literal notranslate"><span class="pre">LoggerWrapper</span></code> class.</p>
<p>Each episode directory includes a <code class="docutils literal notranslate"><span class="pre">monitor</span></code> directory with several CSV files for data such as observations, actions, rewards, info and custom metrics, as detailed in <a class="reference internal" href="output.html#sinergym-output"><span class="std std-ref">Sinergym output</span></a>.</p>
<p>Please note that the CSVs for observations and info dictionaries are saved with an additional row, as they are saved at the beginning of the episode when <code class="docutils literal notranslate"><span class="pre">reset</span></code> is called. Subsequently, for a given row with the same index, there would be the observation and info, the action taken in that state, and the reward obtained from that action in that state.</p>
</section>
<section id="wandblogger">
<h3>WandBLogger<a class="headerlink" href="#wandblogger" title="Link to this heading"></a></h3>
<p>This wrapper works with the  <code class="docutils literal notranslate"><span class="pre">data_logger</span></code> instance of <code class="docutils literal notranslate"><span class="pre">LoggerWrapper</span></code> to dump information to the <a class="reference external" href="https://wandb.ai/site">Weights and Biases</a> platform in real-time.</p>
<p>This solution is ideal for monitoring the real-time training process and can be integrated with Stable Baselines 3 callbacks. The initialization process allows the user to define a number of key parameters, including the project, entity, run groups, tags, and whether code or outputs are saved as platform artifacts. Additionally, the user can specify the dump frequency, any excluded info keys, and excluded summary metric keys.</p>
<p>This wrapper can be used with an existing WandB session, eliminating the need to specify the entity or project (which, if provided, will be ignored). In the absence of a pre-existing WandB session, it is necessary to provide the entity and project fields.</p>
<p>This wrapper will only save data on episode summaries once they have reached a minimum of 90% completion. This can be modified when creating the wrapper.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>A Weights and Biases account is required to use this wrapper, with an environment variable containing the API key
for login.</p>
</div>
</section>
</section>
<section id="reduceobservationwrapper">
<h2>ReduceObservationWrapper<a class="headerlink" href="#reduceobservationwrapper" title="Link to this heading"></a></h2>
<p>This wrapper reduces the original observation space by subtracting the variables specified in the string list parameter. These removed variables are returned in the info dictionary under the key <code class="docutils literal notranslate"><span class="pre">removed_variables</span></code>, and are ignored by the agent.</p>
<p>If combined with the <a class="reference internal" href="#loggerwrapper"><span class="std std-ref">LoggerWrapper</span></a> in subsequent layers, the removed variables will be saved in the output files, even if they are not used. This makes it perfect for monitoring simulation values that are not part of the problem to be solved.</p>
<p>Similarly, any other wrapper applied in layers prior to this one will affect the removed variables, which can be observed in the info dictionary.</p>
</section>
<section id="multiobswrapper">
<h2>MultiObsWrapper<a class="headerlink" href="#multiobswrapper" title="Link to this heading"></a></h2>
<p>This wrapper stacks observations received in a history queue.</p>
<p>The size of the queue can be customized.</p>
</section>
<section id="weatherforecastingwrapper">
<h2>WeatherForecastingWrapper<a class="headerlink" href="#weatherforecastingwrapper" title="Link to this heading"></a></h2>
<p>This wrapper adds weather forecast information to the current observation.</p>
</section>
<section id="energycostwrapper">
<h2>EnergyCostWrapper<a class="headerlink" href="#energycostwrapper" title="Link to this heading"></a></h2>
<p>This wrapper adds energy cost information to the current observation.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It internally uses the <code class="docutils literal notranslate"><span class="pre">EnergyCostLinearReward</span></code> reward function, independently of the reward function set when creating the environment.</p>
</div>
</section>
<section id="deltatempwrapper">
<h2>DeltaTempWrapper<a class="headerlink" href="#deltatempwrapper" title="Link to this heading"></a></h2>
<p>This wrapper adds to the observation space the delta values with respect to the specified zone temperatures, that its, the difference between the zone air temperature and the fixed setpoint value.</p>
<p>It requires that the air temperature and setpoints variables are defined in the wrapper constructor.</p>
<p>If the environment has a unique setpoint variable for all zones, you can specify a single setpoint variable. Otherwise, you can specify a list of variables, one for each zone.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The air temperature variables and setpoints variables should be specified in the same order. The length of these lists should be the same, in case you are not using the same setpoint for all zones.</p>
</div>
</section>
<section id="variabilitycontextwrapper">
<h2>VariabilityContextWrapper<a class="headerlink" href="#variabilitycontextwrapper" title="Link to this heading"></a></h2>
<p>This wrapper introduces context changes (see <a class="reference internal" href="environments.html#context"><span class="std std-ref">Context</span></a>) at specific steps based on a uniform distribution.</p>
<p>When the event is triggered, delta values for the context variables and a time (in steps) for the change to occur are randomly determined based on the specified arguments.</p>
<p>The configurable arguments include the space of the context variables, the range of possible delta values, and the range of steps in which the event can take place.</p>
<p>If applying the deltas results in values outside the defined space, they will be clipped to remain within bounds before being applied.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If initial context values were not provided in environment initialization, initial context values will be selected randomly for this wrapper.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="controllers.html" class="btn btn-neutral float-left" title="Controllers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="extra-configuration.html" class="btn btn-neutral float-right" title="Extra configuration in Sinergym simulations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, J. Jiménez, J. Gómez, M. Molina, A. Manjavacas, A. Campoy.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: v3.8.0
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Tags</dt>
            <dd><a href="../../v1.4.0/pages/wrappers.html">v1.4.0</a></dd>
            <dd><a href="../../v1.6.0/pages/wrappers.html">v1.6.0</a></dd>
            <dd><a href="../../v1.7.0/pages/wrappers.html">v1.7.0</a></dd>
            <dd><a href="../../v2.0.0/pages/wrappers.html">v2.0.0</a></dd>
            <dd><a href="../../v2.1.0/pages/wrappers.html">v2.1.0</a></dd>
            <dd><a href="../../v2.2.0/pages/wrappers.html">v2.2.0</a></dd>
            <dd><a href="../../v2.3.0/pages/wrappers.html">v2.3.0</a></dd>
            <dd><a href="../../v2.5.0/pages/wrappers.html">v2.5.0</a></dd>
            <dd><a href="../../v3.1.0/pages/wrappers.html">v3.1.0</a></dd>
            <dd><a href="../../v3.2.0/pages/wrappers.html">v3.2.0</a></dd>
            <dd><a href="../../v3.3.0/pages/wrappers.html">v3.3.0</a></dd>
            <dd><a href="../../v3.4.0/pages/wrappers.html">v3.4.0</a></dd>
            <dd><a href="../../v3.5.0/pages/wrappers.html">v3.5.0</a></dd>
            <dd><a href="../../v3.6.0/pages/wrappers.html">v3.6.0</a></dd>
            <dd><a href="../../v3.7.0/pages/wrappers.html">v3.7.0</a></dd>
            <dd><a href="wrappers.html">v3.8.0</a></dd>
        </dl>
        <dl>
            <dt>Branches</dt>
            <dd><a href="../../main/pages/wrappers.html">main</a></dd>
        </dl>
    </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

<style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search,
    .wy-nav-top {
        background: #a5beba;
    }

    /* Sidebar */
    .wy-nav-side {
        background: #2b3435;
    }
</style>


</body>
</html>